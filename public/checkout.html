<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Checkout</title>
  <style>
    input, button {
      display: block;
      margin-bottom: 10px;
      padding: 10px;
      width: 300px;
    }
    button {
      background: #0066cc;
      color: white;
      border: none;
      cursor: pointer;
    }
    button:disabled {
      background: #ccc;
      cursor: not-allowed;
    }
  </style>
</head>
<body>
  <h2>Pay R200</h2>

  <input type="text" id="card-number" placeholder="Card Number" />
  <input type="text" id="expiry-month" placeholder="Expiry Month (MM)" />
  <input type="text" id="expiry-year" placeholder="Expiry Year (YYYY)" />
  <input type="text" id="cvv" placeholder="CVV" />

  <button id="pay-btn">Pay Now</button>

  <script>
    const FIREBASE_FUNCTION_URL = "https://us-central1-YOUR_PROJECT.cloudfunctions.net/chargeCard";

    document.getElementById("pay-btn").addEventListener("click", async () => {
      const cardNumber = document.getElementById("card-number").value.trim();
      const expMonth = document.getElementById("expiry-month").value.trim();
      const expYear = document.getElementById("expiry-year").value.trim();
      const cvv = document.getElementById("cvv").value.trim();

      if (!cardNumber || !expMonth || !expYear || !cvv) {
        alert("Please fill in all fields");
        return;
      }

      const payBtn = document.getElementById("pay-btn");
      payBtn.disabled = true;
      payBtn.innerText = "Processing...";

      try {
        const response = await fetch(FIREBASE_FUNCTION_URL, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({
            cardNumber,
            expMonth,
            expYear,
            cvv,
            amountInCents: 20000
          })
        });

        const data = await response.json();

        if (data.success) {
          alert("Payment successful!");
        } else {
          alert("Payment failed: " + data.message);
        }
      } catch (err) {
        alert("Error: " + err.message);
      }

      payBtn.disabled = false;
      payBtn.innerText = "Pay Now";
    });
  </script>
</body>
</html>
